<style>
</style>

{% extends 'base.html' %}

{% block head %}
<title></title>
<link rel = "stylesheet" href = "{{ url_for('static', filename='css/main.css') }}">
{% endblock %}

{% block body %}
    
<div class="container">

    <ul class="tab-nav">
<div class="content" style="margin-left: 5vw; margin-right: 5vw;">
    <h1>Task Master</h1>
    

        {% for key, value in tables_dict.items() %}
            <li><a href="#{{key}}" class="tab-link">{{key}}</a></li>
        {% endfor %}
    
    </ul>

    {% for key, value in tables_dict.items() %}
        <div id="{{key}}" class="tab-content">
            <table id = "interactive_table" style="width:90vw; text-align: center;
    ">
        <thead>
            <tr>
                <th>Task</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for task in tasks %}
            <tr>
                    <td data-pk="{{task[0]}}">{{task[0]}}</td>
                    <td data-name="task" class="task" data-type="text" data-pk="{{task[0]}}">{{task[1]}}</td>
                
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <form action="/add/{{key}}" method="POST">
        {% for attribute in value %}
            <label for="{{key}}_{{attribute}}">{{attribute}}</label>
            <input type="text" name="{{key}}_{{attribute}}" id="{{key}}_{{attribute}}">
            <br>
        {% endfor %}
        <input type="submit" value="Add">
    </form>
        </div>

    
    {% endfor %}
 
</div>

<script>

// $.fn.editable.defaults.mode = 'inline';

$(document).ready( function () {
    var dataTable = $('#interactive_table').DataTable({
        "aLengthMenu": [[3, 5, 10, 25, -1], [3, 5, 10, 25, "All"]],
        "iDisplayLengtg": 3,
    });

    $('#interactive_table').editable({
        container:'body',
        selector:'td.task',
        url:'/update',
        title:'Task',
        type:'POST',
        validate:function(value){
            if($.trim(value) == '')
            {
                return 'This field is required';
            }
        }
    });

} );

</script>

{% endblock %}